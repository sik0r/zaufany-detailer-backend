{% extends 'workshop_panel/base.html.twig' %}

{% block title %}Dodaj warsztat{% endblock %}
{% block header %}Dodaj nowy warsztat{% endblock %}

{% block body %}
    <div class="container mx-auto px-4 py-6" {{ stimulus_controller('workshop_url_preview') }}>
        <h2 class="text-2xl font-semibold mb-6">Nowy Warsztat</h2>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Form Column (2/3 width on large screens) -->
            <div class="lg:col-span-2">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        {{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="form-control">
                                    {{ form_label(form.name, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.name, {'attr': stimulus_target('workshop_url_preview', 'name').toArray()|merge({'class': 'input input-bordered w-full'})}) }}
                                    {{ form_errors(form.name) }}
                                </div>
                                <div class="form-control">
                                    {{ form_label(form.email, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.email, {'attr': {'class': 'input input-bordered w-full'}}) }}
                                    {{ form_errors(form.email) }}
                                </div>
                                <div class="form-control">
                                    {{ form_label(form.street, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.street, {'attr': {'class': 'input input-bordered w-full'}}) }}
                                    {{ form_errors(form.street) }}
                                </div>
                                <div class="form-control">
                                    {{ form_label(form.postalCode, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.postalCode, {'attr': {'class': 'input input-bordered w-full'}}) }}
                                    {{ form_errors(form.postalCode) }}
                                </div>
                                <div class="form-control">
                                    {{ form_label(form.region, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.region, {'attr': stimulus_target('workshop_url_preview', 'region').toArray()|merge({'class': 'select select-bordered w-full'})}) }}
                                    {{ form_errors(form.region) }}
                                </div>
                                <div class="form-control">
                                    {{ form_label(form.city, null, {'label_attr': {'class': 'label'}}) }}
                                    {{ form_widget(form.city, {'attr': stimulus_target('workshop_url_preview', 'city').toArray()|merge({'class': 'select select-bordered w-full'})}) }}
                                    {{ form_errors(form.city) }}
                                </div>
                            </div>

                            <div class="mt-6">
                                <button type="submit" class="btn btn-primary w-full md:w-auto">Zapisz warsztat</button>
                            </div>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>

            <!-- URL Preview Column (1/3 width on large screens) -->
            <div class="lg:col-span-1">
                <div class="card bg-base-200 shadow-xl sticky top-4">
                    <div class="card-body p-4 sm:p-6">
                        <h3 class="card-title text-lg mb-4 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                            </svg>
                            Adres URL warsztatu
                        </h3>

                        <div class="space-y-4">
                            <div class="alert alert-info text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Adres URL zostanie wygenerowany automatycznie na podstawie nazwy warsztatu, województwa i miasta.</span>
                            </div>

                            <div data-workshop-url-preview-target="preview" class="p-3 bg-base-300 rounded-lg text-sm font-mono break-all">
                                Uzupełnij nazwę, województwo i miasto, aby zobaczyć podgląd URL
                            </div>

                            <div class="alert alert-warning text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                                <span>Adres URL musi być unikalny w systemie. W przypadku konfliktu zostanie automatycznie zmodyfikowany.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
